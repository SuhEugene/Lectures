# Проектирование рел. БД

При проектировании БД решаются 2 проблемы:

1. **Логическое проектирование.** Как отобразить объекты реального мира в абстрактные объекты модели данных?
2. **Физическое проектирование.** Как обеспечить эффективность выполнения запросов в БД? Как, имея ввиду особенности конкретной СУБД, расположить данные в ОЗУ? Создание каких доп. структур потребовать?

## Нормализация

Проектирование рел. БД производится методом последовательных приближений к удовлетворительному набору схем отношений. Исходная точка - представление предметной области в виде одного отношения или нескольких.

Процесс нормализации схем отношений, причём каждая следующая - **нормальная форма** (НФ) обладает свойствами лучшими, чем предыдущая.

Каждой НФ соответствует некоторый определённый набор ограничений. Существуют такие НФ:

- Первая нормальная форма - 1НФ
- Вторая нормальная форма - 2НФ
- Третья нормальная форма - 3НФ
- Нормальная форма Бойса-Кордда - БКНФ
- Четвёртая нормальная форма - 4НФ
- Пятая нормальная форма - 5НФ

#### Основные свойства НФ

- Каждая следующая НФ в некотором определённом смысле лучше предыдущей.
- При переходе к следующей НФ, свойства предыдущих НФ сохраняются.

**Нормализация** - декомпозиция отношения, находящегося в предыдущей НФ в два или более отношения удовлетворяющей требованиям следующей НФ.

Нормализацию часто завершают на 3НФ.

При использование ненормализованных таблиц возможны проблемы:

- Избыточность данных
- Аномалии обновления, удаления, ввода


- **1НФ** - Значения атрибутов отношения должны быть атомарны.  
  *Например*, если было поле `ФИО`, то теперь должны быть отдельные поля: `Фамилия`, `Имя` и `Отчество`.

- **2НФ** - Таблица должна быть в 1НФ, и все неключевые атрибуты должны зависеть от всего первичного ключа, исключая частичные зависимости.  
  *Например*, если есть таблица с полями (`Студент_ID`, `Курс_ID`, `Имя_Студента`, `Название_Курса`), то нужно разделить на две таблицы: одну для студентов и другую для курсов.

- **3НФ** - Таблица должна быть в 2НФ, и все неключевые атрибуты должны зависеть только от первичного ключа, исключая транзитивные зависимости.  
  *Например*, если в таблице (`Студент_ID`, `Имя_Студента`, `Группа`) поле `Группа` зависит от `Имя_Студента`, то нужно создать отдельную таблицу для групп.

- **BCNF** - Таблица должна быть в 3НФ, и для каждого функционального зависимости X → Y, X должно быть суперключом.  
  *Например*, если есть зависимость (`Курс_ID` → `Преподаватель`), и `Курс_ID` не является суперключом, то нужно разделить таблицу на две: одну для курсов и другую для преподавателей.

- **4НФ** - Таблица должна быть в BCNF и не должна содержать многозначных зависимостей.  
  *Например*, если в таблице (`Студент_ID`, `Спорт`, `Хобби`) один студент может заниматься несколькими видами спорта и иметь несколько хобби, то нужно создать две таблицы: одну для спорта и другую для хобби.

- **5НФ** - Таблица должна быть в 4НФ и не должна содержать зависимостей, которые могут быть разделены на несколько таблиц без потери информации.  
  *Например*, если в таблице (`Студент_ID`, `Курс_ID`, `Преподаватель_ID`) есть зависимость, что один преподаватель может вести несколько курсов, то нужно разделить на три таблицы: студенты, курсы и преподаватели.
