# Основная память

Единственный вид памяти, к которому ЦП может обращаться непосредственно, то есть напрямую.

Основную память образуют запоминающие устройства с произвольным доступом. Может включать в себя два типа запоминающих устройств: ОЗУ и ПЗУ.

ОЗУ допускает обе операции: и считывание, и запись, которые выполняются однотипно практически с одной и той же скоростью и производятся с помощью электрических сигналов. ОЗУ - энергозависимые устройства.

ПЗУ обеспечивают считывание информации, но не её изменение. Это энергонезависимые устройства.

Ёмкость основной памяти современных вычислительных машин велика, поэтому её организовывают на базе нескольких интегральных микросхем. Увеличение разрядности запоминающих устройств реализуется за счёт объединения адресных входов микросхем. Полученную совокупность микросхем называют **модулем памяти**. Один или несколько модулей памяти образуют **банк памяти**.

Для получения требуемой ёмкости определённым образом объединяют несколько банков памяти меньшей ёмкости.

При использовании блочной памяти состоящей из $B$ банков, адрес ячейки $A$ преобразуется в пару $\{b,w\}$, где $b$ - номер банка, $w$ - адрес ячейки внутри банка.

Известны три схемы распределения разрядов между $b$ и $w$:

- Блочная
- Циклическая
- Блочно-циклическая

Рассмотрим основные схемы на примере памяти ёмкостью 512 слов, построенной из 4 банков по 128 слов в каждом.

### Структура основной памяти на основе блочной схемы

Адресное пространство памяти разбито на группы адресов. Каждая группа обеспечивается своим банком.

Для обращения к памяти используется девятиразрядный адрес, причём семь младших разрядов $A_6-A_0$ поступают параллельно во все банки памяти и выбирают в каждом из банков одну ячейку. Два старших разряда $A_7,A_8$ содержат номер банка. Выбор банка обеспечивается либо с помощью дешифратора номера банка, либо путём мультиплексирования информации.

Таким образом память может рассматриваться как единое запоминающее устройство, ёмкость которого равна суммарной ёмкости составляющих, а быстродействие равно быстродействию отдельного банка

## Расслоение памяти (циклическая схема)

Для увеличения скорости доступа придумали методику расслоения памяти, в основе которой лежит чередование адресов, заключающееся в изменении системы распределения адресов между банками памяти.

Приём чередования адресов базируется на свойстве локальности по обращению. Чередование адресов обеспечивается за счёт циклического разбиения адреса. Для выбора банка используются два младших разряда: $A_0-A_1$, для выбора ячейки - семь старших $A_2-A_6$.

Так как в каждом такте на шине адреса может присутствовать только адрес одной ячейки, то параллельное обращение к нескольким банкам невозможно. Однако, оно может быть организовано со сдвигом на один такт.

Адрес ячейки запоминается в индивидуальном регистре адреса и дальнейшие операции по доступу к ячейке в каждом банке протекают независимо. ...протекают $B$ раз, но при условии, что ячейки, к которым производится последовательное обращение, относятся к разным банкам. Если же запросы к одному и тому же банку следуют друг за другом, то каждый следующий запрос должен ожидать завершения предыдущей операции. Такая ситуация называется конфликтом по доступу. При частом возникновении конфликтов метод становится неэффективным.

В блочной циклической схеме каждый банк состоит из нескольких модулей, адресуемых по циклической схеме. Расположение разделяется на три части: старшие биты определяют номер банка, следующая указывает на ячейку памяти в модуле, младшие биты выбирают модуль в банке.

В многопроцессорных системах с общей памятью, где запросы на доступ достаточно независимы друг от друга, включают систему контроллеров памяти, что позволяет отдельным банкам работать автономно.

## Синхронизация микросхем памяти

ИМС - интегральные микросхемы памяти - организованы в виде матрицы ячеек, каждая из которых состоит из одного или более запоминающих элементов.

Для запоминающего элемента любой полупроводниковой памяти характерны следующие свойства:

1. Два стабильных состояния, представляющие двоичные `0` и `1`.
2. В запоминающий элемент хотя бы однажды может быть произведена запись информации путём его перевода в одно из возможных состояний.
3. Для определения текущего состояния запоминающего элемента, его содержимое может быть считано.

При матричной организации микросхем памяти, реализуется координатный принцип адресации ячеек. Адрес ячейки, поступающий по шине адреса, пропускается через логику выбора и разделяется на две составляющие: адрес строки и адрес столбца, которые запоминаются в соответствующих регистрах. Регистры соединены каждый со своим дешифратором. Выходы дешифраторов образуют систему горизонтальных и вертикальных линий, на пересечении которых расположены запоминающие элементы. Совокупность запоминающих элементов и логических схем, связанных с выбором строки и столбца называется ядром микросхемы памяти.

Кроме ядра есть ещё интерфейсная логика, обеспечивающая взаимодействие ядра с внешним миром. Разрядность микросхемы определяет количество запоминающих элементов, имеющих один и тот же адрес. То есть каждый столбце содержит столько разрядов, сколько есть линий ввода-вывода данных.

Для синхронизации процессов, фиксации и обработки адресной информации внутри микросхемы адрес строки сопровождается сигналом $RAS$ (строб строки). Адрес столбца сопровождается сигналом $CAS$ (строб столбца). Чтобы стробирование было надёжным, сигналы $RAS$ и $CAS$ подаются с задержкой, достаточной для завершения переходных процессов на шине адреса и в адресных цепях.

Сигнал $OS$ разрешает работу микросхемы. Сигнал $WE$ определяет вид выполняемой операции. $OE$ переводит микросхему в третье z-состояние.

Записываемая информация, поступающая по шине данных, сначала заносится во входной регистр данных, а затем в выбранную ячейку. При чтении информации, данные из ячейки до выдачи на шину данных хранятся в выходном регистре данных.

Усилители считывания записи служат для электрического согласования сигналов на линиях данных и внутренних сигналов микросхемы. Обычно число усилителей равно числу запоминающих элементов в строке и при обращении к памяти все усилители подключаются к выбранной горизонтальной линии. Каждая группа усилителей, образующая ячейку, подключена к одному из столбцов. То есть выбор нужной ячейки в строке обеспечивается активацией одной из вертикальных линий.

На всё пока микросхема не использует шину данных, информационные выходы переводятся в третье состояние.